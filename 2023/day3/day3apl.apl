r←,p←↑⊃⎕nget'03.txt'1
m←(⍴p)⍴d×+\2</0,d←r∊⎕D
n←⍎¨d⊆r ⋄ g←,{⊂n[∪0~⍨,⍵]}⌺3 3⊢m
+/∊g/⍨~r∊'.',⎕D ⍝ part 1
+/×/¨g/⍨(2=≢¨g)∧'*'=r ⍝ part 2